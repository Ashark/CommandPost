--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--                          M I D I     P L U G I N                           --
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--- === plugins.finalcutpro.midi.manager ===
---
--- MIDI Plugin for Final Cut Pro.

--------------------------------------------------------------------------------
--
-- EXTENSIONS:
--
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Logger:
--------------------------------------------------------------------------------
local log										= require("hs.logger").new("fcpMIDI")

--------------------------------------------------------------------------------
-- CommandPost Extensions:
--------------------------------------------------------------------------------
local fcp										= require("cp.apple.finalcutpro")

--------------------------------------------------------------------------------
--
-- THE PLUGIN:
--
--------------------------------------------------------------------------------
local plugin = {
	id = "finalcutpro.midi.manager",
	group = "finalcutpro",
	dependencies = {
		["core.midi.manager"]		= "manager",
	}
}

--------------------------------------------------------------------------------
-- INITIALISE PLUGIN:
--------------------------------------------------------------------------------
function plugin.init(deps)

	--------------------------------------------------------------------------------
	-- Update MIDI Commands when Final Cut Pro is shown or hidden:
	--------------------------------------------------------------------------------
	fcp:watch({
		active		= function() deps.manager.groupStatus("fcpx", true) end,
		inactive	= function() deps.manager.groupStatus("fcpx", false) end,
		show		= function() deps.manager.groupStatus("fcpx", true) end,
		hide    	= function() deps.manager.groupStatus("fcpx", false) end,
	})

end

return plugin